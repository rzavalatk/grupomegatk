<?xml version="1.0" encoding="utf-8"?>
<templates>
    <t t-name="TrackingCardMenu">
        <div>
            <style id='tracking_card_style'>
                <!-- utilidades -->
                .flex-content-center {
                    display: flex;
                    justify-content: center;
                }

                .flex-column {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                }

                .text-bold {
                    font-weight: bold;
                }

                .root {
                    padding: 0;
                }
                <!-- tarjeta -->
                .menu-card {
                    align-items: center;
                    background-color: white; 
                    height: 400px; 
                    width: 400px; 
                    border-radius: 0 0 10px 10px;
                    padding: 30px;
                }

                .full-card {
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #242733;
                    border-radius: 10px;
                    background-color: white;
                    box-shadow: 0px 0px 10px black;
                }

                @media(max-width: 768px) {
                    .menu-card {
                        border-radius: 0;
                        width: 100%;
                    }

                    .full-card {
                        border-radius: 0;
                        width: 100%;
                        height: 100%
                    }
                }

                .banner {
                    background-image: linear-gradient(to right, #004080, #0080ff);
                    height: 60px;
                    width: 400px; 
                    border-radius: 10px 10px 0 0;
                }

                @media(max-width: 768px) {
                    .banner {
                        border-radius: 0;
                        width: 100%;
                    }
                }

                .card-title {
                    font-size: 40px;
                    text-align: center;
                    color: #242733;
                }

                .card-text {
                    font-size: 18px;
                    text-align: center;
                }

                .card-input {
                    border: none;
                    border-bottom-style: outset;
                    width: 50%;
                    background-color: #f2f2f2;
                    margin-top: 10px;
                    font-size: 20px;
                    text-align: center;
                    color: #242733;
                }

                .msg-error {
                    font-size: 14px;
                    color: #e60000; 
                }

                .btn-start {
                    background-color: #33cc33;
                }
            </style>
            <t t-if="widget.current_trip">
                <t t-set="check_in" t-value="widget.current_trip.check_in"/>
            </t>
            <div id="root">
                <div class="flex-content-center pt-5">
                    <div class="full-card">
                        <div class="banner"></div>
                        <div class="menu-card flex-column">
                            <t t-if="!check_in">
                                <t t-if="widget.showMsg">
                                    <h2 class="card-title" t-esc="widget.msg.title"></h2>
                                </t>
                                <t t-else="">
                                    <h2 class="card-title">¡Bienvenido!</h2>
                                </t>               
                            </t>
                            <t t-else="">
                                <t t-if="widget.showMsg">
                                    <h2 class="card-title" t-esc="widget.msg.title"></h2>
                                </t>
                                <t t-else="">
                                    <h2 class="card-title">En Curso</h2>
                                </t>
                            </t>
                            <t t-if="!check_in">
                                <t t-if="widget.showMsg">
                                    <p class="card-text" t-esc="widget.msg.message"></p>
                                </t>
                                <t t-else="">
                                    <p class="card-text">Para iniciar un viaje ingrese el ID del dispositivo</p>
                                    <input type="text" class="card-input" id="id_device" pattern='\d{6}' minlength="8" maxlength="8" inputmode="numeric" required="true"/>
                                </t>
                                <div class="msg-error">
                                    <span id="msg-text"></span>
                                </div>
                            </t>
                            <t t-else="">
                                <t t-if="widget.showMsg">
                                    <p class="card-text" t-esc="widget.msg.message"></p>
                                </t>
                                <t t-else="">
                                    <p class="card-text">¿Desea finalizar el viaje? Una vez finalizado no se puede reactivar</p>
                                </t>
                            </t>
                            <div class="flex-column">
                                <button t-attf-class="o_hr_attendance_sign_in_out_icon btn btn-{{ check_in ? 'warning' : 'success' }} align-self-center px-5 py-3 mt-4 mb-2">
                                    <span class="text-bold align-middle fs-2 me-3 text-white" t-if="!check_in">Iniciar Viaje</span>
                                    <i t-attf-class="fa fa-4x fa-sign-{{ check_in ? 'out' : 'in' }} align-middle"/>
                                    <span class="text-bold align-middle fs-2 ms-3" t-if="check_in">Finalizar Viaje</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
