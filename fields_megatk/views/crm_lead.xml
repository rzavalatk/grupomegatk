<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="crm_campo_megatk_view_inh">
	  		<field name="name">crm.lead.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.view_crm_case_opportunities_filter" />
				<field name="arch" type="xml">
					<field name="lost_reason" position="after">
						<field name="id" string='Ticket'/>
		      </field>
				</field>
	   	</record>
	   	<record model="ir.ui.view" id="crm_kanban_campo_megatk_view_inh">
	  		<field name="name">crm.kanban.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.crm_case_kanban_view_leads" />
				<field name="arch" type="xml">
					<field name="name" position="before">
						<div>
	            <strong class="o_kanban_record_title">Ticket <field name="id"/></strong>
						</div>
		      </field>
				</field>
   		</record>
   		<record model="ir.ui.view" id="crm_lista_campo_megatk_view_inh">
	  		<field name="name">crm.lista.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.crm_case_tree_view_oppor" />
				<field name="arch" type="xml">
					<field name="create_date" position="after">
	          	<field name="id" string="Ticket"/>
	        </field>
			</field>
   		</record>
   		<record model="ir.ui.view" id="crm_case_form_campo_megatk_view_inh">
	  		<field name="name">crm.case.form.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.crm_case_form_view_leads" />
				<field name="arch" type="xml">
					<field name="name" position="before">
		      	<h1>Ticket: <field name="id"/></h1>
		      	<field name="fecha_movimiento" invisible='1'/>
		      </field>
		      <xpath expr="//field[@name='name']" position="attributes">
				    <attribute name="attrs">{}</attribute>
				    <attribute name="readonly">1</attribute>
				    <attribute name="required">1</attribute>
				  </xpath>
		      <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
				    <page name="soportetecnico" string="Soporte Tecnico">
					     <group name="soporte">
					        <group name="data1">
					        	<field name="tipo_soporte"/>
					        	<field name="estado_taller" attrs='{"invisible": [["tipo_soporte","not in",["taller","interno","sin_costo"]]]}'/>
					        	<field name="tipo_visita" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="proposito" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        </group>	
					        <group name="data2">
					        	<field name="reporto" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="repor_tel" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="repor_email" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="serie" attrs='{"invisible": [["tipo_soporte","!=","taller"]]}'/>
					        	<field name="accesorio_ids" widget="many2many_tags" attrs='{"invisible": [["tipo_soporte","!=","taller"]]}'/>
					        </group>	
					    </group>
					    <group name="soporte1" attrs='{"invisible": [["tipo_soporte","!=","taller"]]}'>
					        <group name="data3">
					        	<field name="marca_id"/>
					        	<field name="categoria_id" domain="[('marca_id', '=', marca_id)]"/>
					        	<field name="modelo_id" domain="[('categoria_id', '=', categoria_id)]"/>
					        </group>	
					        <group name="data4">
					        	<field name="fallas"/>
					      	<field name="informe_tecnico"/>
					      	<field name="observacion_visita" invisible='1'/>
					        </group>	
					    </group>
				    </page>
				  </xpath>
			</field>
 		</record>
   		<record model="ir.ui.view" id="crm_form_campo_megatk_view_inh">
	  		<field name="name">crm.form.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.crm_case_form_view_oppor" />
				<field name="arch" type="xml">
					<header>
        		<button name="imprimir_soporte" type="object" string="IMPRIMIR" class="oe_highlight" attrs='{"invisible": [["tipo_soporte","=","llamada"]]}'/>  
        	</header>
					<field name="name" position="before">
		      	<h1>Ticket: <field name="id"/></h1>
		      </field>
		      <xpath expr="//form[1]/sheet[1]/div[4]/h1[1]/field[@name='name']" position="attributes">
				    <attribute name="attrs">{}</attribute>
				    <attribute name="readonly">1</attribute>
				    <attribute name="required">1</attribute>
				  </xpath>
		      <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
				    <page name="soportetecnico" string="Soporte Tecnico">
					     <group name="soporte">
					        <group name="data1">
					        	<field name="tipo_soporte"/>
					        	<field name="estado_taller" attrs='{"invisible": [["tipo_soporte","not in",["taller","interno","sin_costo"]]]}'/>
					        	<field name="tipo_visita" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="proposito" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        </group>	
					        <group name="data2">
					        	<field name="reporto" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="repor_tel" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="repor_email" attrs='{"invisible": [["tipo_soporte","!=","visita"]]}'/>
					        	<field name="serie" attrs='{"invisible": [["tipo_soporte","not in",["taller","interno","sin_costo"]]]}'/>
					        	<field name="accesorio_ids" widget="many2many_tags" attrs='{"invisible": [["tipo_soporte","not in",["taller","interno","sin_costo"]]]}'/>
					        </group>	
					    </group>
					    <group name="soporte1" attrs='{"invisible": [["tipo_soporte","not in",["taller","interno","sin_costo"]]]}'>
					        <group name="data3">
					        	<field name="marca_id"/>
					        	<field name="categoria_id" domain="[('marca_id', '=', marca_id)]"/>
					        	<field name="modelo_id" domain="[('categoria_id', '=', categoria_id)]"/>
					        </group>	
					        <group name="data4">
					        	<field name="fallas"/>
					      	<field name="informe_tecnico"/>
					      	<field name="observacion_visita" invisible='1'/>
					        </group>	
					    </group>
				    </page>
				  </xpath>
				  <xpath expr="//field[@name='campaign_id']" position="attributes">
				    <attribute name="attrs">{}</attribute>
				    <attribute name="invisible">1</attribute>
				  </xpath>
				  <xpath expr="//field[@name='medium_id']" position="attributes">
				    <attribute name="attrs">{}</attribute>
				    <attribute name="invisible">1</attribute>
				  </xpath>
				  <xpath expr="//field[@name='source_id']" position="attributes">
				    <attribute name="attrs">{}</attribute>
				    <attribute name="invisible">1</attribute>
				  </xpath>
				  <xpath expr="//field[@name='source_id']" position="after">
    				<field name="producto1"/>
    				<field name="producto2"/>
    				<field name="producto3"/>
  				</xpath>
			</field>
 		</record>
 		
 		<record model="ir.ui.view" id="crm_form_simple_megatk_view_inh">
	  		<field name="name">crm.simple.campomegatk.view</field>
	  		<field name="model">crm.lead</field>
	  		<field name="inherit_id" ref="crm.quick_create_opportunity_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='name']" position="attributes">
			    	<attribute name="attrs">{}</attribute>
			    	<attribute name="invisible">1</attribute>
			  	</xpath>
				<field name="partner_id" position="before">
					<field name="tipo_id" options="{'no_create': True}"/>
	      		</field>
			</field>
	   	</record>
	   	
 		<record model="ir.actions.act_window" id="action_crm_lead_marca">
			<field name="name">Marcas</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">crm.lead.marca</field>
			<field name="view_mode">tree,form</field>
	    </record>
    	<record model="ir.actions.act_window" id="action_crm_lead_categoria">
			<field name="name">Categorias</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">crm.lead.categoria</field>
			<field name="view_mode">tree,form</field>
	    </record>
	    <record model="ir.actions.act_window" id="action_crm_lead_modelo">
			<field name="name">Modelos</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">crm.lead.modelo</field>
			<field name="view_mode">tree,form</field>
    	</record>

	    <menuitem name="Soporte Tecnico" id="crm_menu_soporte_taller" sequence = "10" parent="crm.crm_menu_root"/>
	    
	    <menuitem name="Marca" id="import_product_menu_marca" sequence = "1" parent="crm_menu_soporte_taller" action = "action_crm_lead_marca"/>
	    <menuitem name="Categoria" id="import_product_menu_category" sequence = "2" parent="crm_menu_soporte_taller" action = "action_crm_lead_categoria"/>
	    <menuitem name="Modelo" id="import_product_menu_modelo" sequence = "3" parent="crm_menu_soporte_taller" action = "action_crm_lead_modelo"/>

	</data>	
</odoo>